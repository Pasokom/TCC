DELIMITER // 
CREATE PROCEDURE ADICIONAR_USUARIO( IN EMAIL VARCHAR(255), IN NOME VARCHAR(255),             
         IN SOBRENOME VARCHAR(255), IN SENHA VARCHAR(255))
BEGIN                                                                                  
                                                                                              
             IF SOBRENOME IS NULL OR SOBRENOME = '' THEN                                      
                                                                                              
                INSERT INTO USUARIO (UEMAIL,UNOME, USENHA) VALUES (EMAIL,NOME,SENHA);         
                                                                                              
             ELSE                                                                             
                                                                                             
                        INSERT INTO USUARIO (UEMAIL,UNOME,USOBRENOME,USENHA) VALUES           
                               (EMAIL,NOME,SOBRENOME,SENHA);                                  
              END IF;                                                                         
                                                                                              
                                                                                              
END 
//


DELIMITER // 
CREATE PROCEDURE EMAIL_EXISTE(IN EMAIL VARCHAR(255), OUT RESULT BIT)
BEGIN 
     DECLARE NUMERO_REGISTROS INT;  
     SELECT COUNT(0) INTO NUMERO_REGISTROS FROM USUARIO WHERE UEMAIL = EMAIL;        
           
    IF NUMERO_REGISTROS > 0 THEN               
        SET RESULT = 1;        
    ELSE                 
        SET RESULT = 0;        
   END IF;    
END 
//



DELIMITER // 
CREATE PROCEDURE ADICIONAR_LEMBRETE (IN LEMBRETE TEXT, IN DIA_TODO BIT, 
 				IN STATUS VARCHAR(20), IN USUARIO INT, OUT CODIGO_LEMBRETE INT) 
 BEGIN 
     IF DIA_TODO IS NULL THEN 
            SET DIA_TODO = FALSE;
    END IF; 
       INSERT INTO LEMBRETE (LEMBRETE, LDIA_TODO, L_STATUS, FK_USUARIO) 
  		 VALUES
          (LEMBRETE, DIA_TODO, STATUS, HORARIO);
         
       SET CODIGO_LEMBRETE = LAST_INSERT_ID();
     END 
//


DELIMITER // 

CREATE  PROCEDURE ADICIONAR_DATA_HORARIO (IN USUARIO INT, IN HORA TIME, IN DATA DATE, OUT CODIGO INT)
BEGIN 
     INSERT INTO DATA_HORARIO (FK_USUARIO, DH_HORA,DH_DATA) 
           VALUES (USUARIO, HORA,DATA);
           
      SET CODIGO = LAST_INSERT_ID();
END 
//




DELIMITER // 
CREATE PROCEDURE ADICIONAR_LEMBRETE_HORARIO (IN LEMBRETE INT, IN DATA_HORARIO INT) 
BEGIN 
 	INSERT INTO HORARIO_LEMBRETE (FK_LEMBRETE, FK_DATA_HORARIO) 
 		VALUES (LEMBRETE, DATA_HORARIO); 
 END 
 //
 







































