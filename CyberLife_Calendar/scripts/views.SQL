CREATE VIEW VIEW_INICIA_SESSAO AS
 SELECT UCODIGO, UNOME, USOBRENOME, UEMAIL, USENHA FROM USUARIO;

    DROP VIEW VIEW_CARREGAR_LEMBRETES;
    CREATE VIEW VIEW_CARREGAR_LEMBRETES AS 
    SELECT UCODIGO,LCOD_LEMBRETE,TITULO,
        ATIVO,TIPO_RECORRENCIA,TIPO_REPETICAO,
        HL_CODIGO, FK_LEMBRETE , DATA_LEMBRETE,DATA_FINAL_LEMBRETE,
        HORARIO_INICIO, HORARIO_FIM,HL_INTERVALO_MINUTOS,HL_RECORRENCIA,HL_SEMANA_DIA,
        HL_QTD_REPETE    
        FROM LEMBRETE 
        INNER JOIN USUARIO ON FK_USUARIO  = UCODIGO 
        INNER JOIN HORARIO_LEMBRETE ON LCOD_LEMBRETE = FK_LEMBRETE 
        WHERE DATE(DATA_LEMBRETE) = DATE(NOW());
    
/*  SELECT TITULO, DATA_LEMBRETE, GROUP_CONCAT(HL_CODIGO) CODIGOS  FROM VIEW_CARREGAR_LEMBRETES GROUP BY TITULO, DATA_LEMBRETE; */

SELECT LCOD_LEMBRETE, GROUP_CONCAT(HL_CODIGO) CODIGOS
 FROM VIEW_CARREGAR_LEMBRETES  WHERE UCODIGO = 1  
 GROUP BY LCOD_LEMBRETE; 


SELECT TITULO, DATA_LEMBRETE, GROUP_CONCAT(HL_CODIGO, 'XPTOÂº') CODIGOS   FROM VIEW_CARREGAR_LEMBRETES  GROUP BY TITULO, DATA_LEMBRETE;
